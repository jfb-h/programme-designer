{% extends "studyprogrammes/layout.html" %}
{% block content %}
<h1>Studiengänge</h1>

<!-- Add Programme Form Row -->
<div style="margin-bottom:2em; padding:1em; background:#f7f7f7; border:1px solid #ddd; border-radius:8px;">
  <h2 style="margin-top:0;">Neuer Studiengang</h2>
  <form method="post" style="display:flex; flex-direction:column; align-items:flex-start; gap:0.7em;">
    {% csrf_token %}
    <div style="display:flex; gap:1em; align-items:center;">
      {{ programme_form.name.label_tag }} {{ programme_form.name }}
      {{ programme_form.degree_type.label_tag }} {{ programme_form.degree_type }}
    </div>
    <button type="submit" style="height:2.4em;">Hinzufügen</button>
  </form>
</div>

<div style="display:flex; gap:2em; flex-wrap:wrap;">
  {% for programme in programmes %}
    <div style="border:1px solid #ccc; border-radius:8px; padding:1em; width:200px; position:relative; display:flex; flex-direction:column; align-items:flex-start;">
      <a href="{% url 'programme' programme.id %}" style="text-decoration:none; color:inherit;">
        <strong>{{ programme.name }}</strong><br>
        {{ programme.get_degree_type_display }}
      </a>
      <div style="display:flex; flex-direction:row; align-items:center; gap:0.5em; margin-top:1em; width:100%;">
        <form method="post" style="margin:0;"
              onsubmit="return confirm('Kurs löschen? Diese Aktion kann nicht rückgängig gemacht werden.');">
          {% csrf_token %}
          <input type="hidden" name="delete_programme_id" value="{{ programme.id }}">
          <button type="submit" name="delete_programme"
            style="background:none; color:#e74c3c; border:none; border-radius:2px; padding:0.0em 0.0em; cursor:pointer; font-size:1.3em;"
            title="löschen">&times;</button>
        </form>
        <form method="post" style="margin:0; flex:1;">
          {% csrf_token %}
          <input type="hidden" name="copy_programme_id" value="{{ programme.id }}">
          <button type="submit" name="copy_programme"
            style="background:none; color:#1976d2; border:none; border-radius:2px; padding:0.0em 0.0em; cursor:pointer; font-size:1.1em; display:flex; align-items:center; gap:0.4em;"
            title="kopieren">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#888" width="20" height="20">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75" />
            </svg>
          </button>
        </form>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}