{% extends "studyprogrammes/layout.html" %}
{% block content %}
<h1>Programmes</h1>

<!-- Add Programme Form Row -->
<div style="margin-bottom:2em; padding:1em; background:#f7f7f7; border:1px solid #ddd; border-radius:8px;">
  <h2 style="margin-top:0;">Add Programme</h2>
  <form method="post" style="display:flex; align-items:flex-end; gap:1em;">
    {% csrf_token %}
    {{ programme_form.name.label_tag }} {{ programme_form.name }}
    {{ programme_form.degree_type.label_tag }} {{ programme_form.degree_type }}
    <button type="submit" style="height:2.4em;">Add Programme</button>
  </form>
</div>

<div style="display:flex; gap:2em; flex-wrap:wrap;">
  {% for programme in programmes %}
    <div style="border:1px solid #ccc; border-radius:8px; padding:1em; width:220px; position:relative;">
      <form method="post" style="position:absolute; top:6px; right:6px; margin:0;"
            onsubmit="return confirm('Are you sure you want to delete this programme? This cannot be undone.');">
        {% csrf_token %}
        <input type="hidden" name="delete_programme_id" value="{{ programme.id }}">
        <button type="submit" name="delete_programme"
          style="background:none; color:#e74c3c; border:none; border-radius:2px; padding:0.0em 0.0em; cursor:pointer; font-size:1.3em;"
          title="Remove Programme">&times;</button>
      </form>
      <a href="{% url 'programme' programme.id %}" style="text-decoration:none; color:inherit;">
        <strong>{{ programme.name }}</strong><br>
        Type: {{ programme.get_degree_type_display }}
      </a>
    </div>
  {% endfor %}
</div>
{% endblock %}